# Quill - Project Context for Claude

> Ce fichier sert de mÃ©moire pour Claude entre les sessions de travail.
> DerniÃ¨re mise Ã  jour : 6 fÃ©vrier 2026

## ğŸ“‹ RÃ©sumÃ© du Projet

**Quill** est une extension Thunderbird pour traiter les emails avec l'IA.
- **Fork de** : Aify (par Ali Raheem)
- **Auteur** : Mike Castro Demaria / Supersonique Studio SARL
- **Repo GitHub** : https://github.com/mikecastrodemaria/Quill
- **ID Extension** : `quill@supersoniquestudio.com`

## ğŸ—ï¸ Structure du Projet

```
/Users/mikecastrodemaria/Documents/Developpement/Quill_project/
â”œâ”€â”€ Quill/                    # Repo principal
â”‚   â”œâ”€â”€ plugin/               # Code de l'extension
â”‚   â”‚   â”œâ”€â”€ manifest.json     # Manifest v2
â”‚   â”‚   â”œâ”€â”€ html/
â”‚   â”‚   â”‚   â”œâ”€â”€ API.js        # Multi-provider (Anthropic, OpenAI, Ollama)
â”‚   â”‚   â”‚   â”œâ”€â”€ settings.js   # Gestion des paramÃ¨tres
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.js       # FenÃªtre de chat
â”‚   â”‚   â”‚   â””â”€â”€ draft.js      # FenÃªtre de brouillon
â”‚   â”‚   â””â”€â”€ images/           # IcÃ´nes
â”‚   â”œâ”€â”€ wiki/                 # Documentation wiki (16 pages)
â”‚   â”œâ”€â”€ README.md             # Doc EN complÃ¨te
â”‚   â”œâ”€â”€ README_FR.md          # Doc FR complÃ¨te
â”‚   â”œâ”€â”€ CHANGELOG.md          # Historique
â”‚   â””â”€â”€ quill-1.2.0.xpi       # Package installable
â”‚
â””â”€â”€ Quill.wiki/               # Clone du wiki GitHub (sÃ©parÃ©)
```

## ğŸ”§ FonctionnalitÃ©s ImplÃ©mentÃ©es

### Providers SupportÃ©s
1. **Anthropic (Claude)** - API cloud
2. **OpenAI (GPT)** - API cloud
3. **Ollama** - IA locale (nÃ©cessite CORS config)

### Actions Disponibles
- RÃ©sumer, Traduire (EN/FR), Corriger, Ton professionnel/casual
- RÃ©diger une rÃ©ponse
- Chat interactif
- Actions personnalisÃ©es

## ğŸ› Bugs RÃ©solus

### 1. CORS avec Ollama
**ProblÃ¨me** : `NetworkError when attempting to fetch resource`
**Solution** : Configurer OLLAMA_ORIGINS="*"
- macOS : `launchctl setenv OLLAMA_ORIGINS "*"` + restart
- ou lancer manuellement : `OLLAMA_ORIGINS="*" ollama serve`

### 2. Chat qui ne fonctionnait pas
**ProblÃ¨me** : `messages: "[]"` (string au lieu de array)
**Solution** : ChangÃ© en `messages: []` dans chat.js et draft.js

## ğŸ“¦ Versions

| Version | Date | Notes |
|---------|------|-------|
| 1.0.x | Origine | Fork initial de Aify |
| 1.1.x | FÃ©v 2026 | Ajout OpenAI |
| 1.2.0 | 6 FÃ©v 2026 | Ajout Ollama, renommage Quill, doc complÃ¨te |

## ğŸ”‘ Infos Techniques

### API Endpoints
```javascript
// Anthropic
POST https://api.anthropic.com/v1/messages
Headers: x-api-key, anthropic-version: 2023-06-01

// OpenAI
POST https://api.openai.com/v1/chat/completions
Headers: Authorization: Bearer sk-...

// Ollama
POST http://localhost:11434/api/chat
Body: { model, messages, stream: false }
```

### Storage Schema
```javascript
{
  apiKey: "sk-...",
  provider: "anthropic" | "openai" | "ollama",
  model: "claude-sonnet-4-20250514",
  maxTokens: 2048,
  ollamaUrl: "http://localhost:11434",
  customActions: [...]
}
```

## ğŸ“ Notes pour Claude

- Le projet Ã©tait initialement nommÃ© "Claify" (Claude + Aify)
- RenommÃ© "Quill" car maintenant multi-provider
- L'utilisateur prÃ©fÃ¨re : rÃ©ponses directes, ton conversationnel, pragmatique
- Documentation bilingue EN/FR requise
- Wiki GitHub = repo sÃ©parÃ© (.wiki.git)

## ğŸš€ Prochaines Ã‰tapes Potentielles

- [ ] Ajouter plus de modÃ¨les Ollama par dÃ©faut
- [ ] Support des images dans les emails
- [ ] Historique des conversations
- [ ] ThÃ¨me sombre pour l'UI
- [ ] Localisation complÃ¨te (i18n)

---
*Fichier gÃ©nÃ©rÃ© par Claude pour maintenir le contexte entre sessions*
